% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/agroindexGrid.R
\name{agroindexGrid}
\alias{agroindexGrid}
\title{Agroclimatic Indices in Climate4R}
\usage{
agroindexGrid(
  index.code,
  tn = NULL,
  tx = NULL,
  pr = NULL,
  tm = NULL,
  hurs = NULL,
  sfcwind = NULL,
  ssrd = NULL,
  index.arg.list = list(),
  cal = "365_day",
  time.resolution = "year",
  parallel = FALSE,
  max.ncores = 16,
  ncores = NULL
)
}
\arguments{
\item{index.code}{Character string, indicating the specific code of the agroclimatic index.
Options include FAO tier1 indices (gsl, avg, nd_thre, nhw, dr, prcptot, nrd, lds, sdii, prcptot_thre, ns),
FAO agronomic season indices (dt_st_rnagsn, nm_flst_rnagsn, dt_fnst_rnagsn, dt_ed_rnagsn, dl_agsn,
dc_agsn, rn_agsn, avrn_agsn, dc_rnlg_agsn, tm_agsn, dc_txh_agsn, dc_tnh_agsn),
and stress indices (CDI, CEI). See Details.}

\item{tn}{A climate4R dataset of daily minimum temperature (degrees C)}

\item{tx}{A climate4R dataset of daily maximum temperature (degrees C)}

\item{pr}{A climate4R dataset of daily precipitation (mm)}

\item{tm}{A climate4R dataset of daily mean air temperature (degrees C).
This parameter matches FAO naming conventions (tm = temperature mean).
For indices that don't require tm specifically, it can be derived from tx and tn if provided.}

\item{hurs}{A climate4R dataset of daily relative humidity (\\%)}

\item{sfcwind}{A climate4R dataset of daily surface wind speed (m/s)}

\item{ssrd}{A climate4R dataset of daily surface solar radiation downwards (J/m^2)}

\item{index.arg.list}{Optional list of index-specific arguments. Depending on the index, this may be required.
Common arguments include:
\itemize{
\item \strong{lat}: Latitude in degrees (required for GSL, optional for others)
\item \strong{threshold}: Threshold value for indices like nd_thre, nhw, prcptot_thre
\item \strong{duration}: Duration in days for indices like nhw, ns
\item \strong{direction}: "geq" or "leq" for nd_thre (greater/less than threshold)
\item \strong{wet.threshold}: Minimum precipitation for wet day (default: 1 mm)
\item \strong{spell.length}: For lds and ns (e.g., "max", "mean", or numeric)
\item \strong{spell.type}: "wet" or "dry" for ns
\item \strong{year.start}, \strong{year.end}: Date strings for custom periods (e.g., "2000-06-01")
\item \strong{pnan}: Maximum percentage of missing data allowed (default: 25\\%)
}
For FAO agronomic indices (agroindexFAO), additional arguments include: shc, rndy, rnlg, txh, tnh.
For CDI/CEI indices, arguments include: bounds (data.frame), combiner, min_duration.
See the help files for individual index functions (e.g., \code{?gsl}, \code{?avg}) for complete parameter lists.}

\item{cal}{A calendar definition. Default to 365-day calendar (not used by FAO/CDI/CEI indices, kept for compatibility).}

\item{time.resolution}{Output time resolution. Choices are "month", "year" (default) and "climatology".
Note: FAO indices are calculated year by year by definition and will ignore this parameter.}

\item{parallel}{Logical. Should parallel execution be used?}

\item{max.ncores}{Integer. Upper bound for user-defined number of cores.}

\item{ncores}{Integer number of cores used in parallel computation. Self-selected number of
cores is used when \code{ncpus = NULL} (the default), or when \code{maxcores} exceeds the default \code{ncores} value.}
}
\description{
Calculation of agroclimatic indices including FAO tier1 indices and CDI/CEI stress indices.
The function processes climate4R grid objects for seamless integration.
}
\details{
\code{\link{agroindexShow}} will display on screen a full list of available agroclimatic indices and their codes.

\strong{Index Groups}
\itemize{
\item \strong{FAO Tier1 indices}: Basic agroclimatic indices (gsl, avg, nd_thre, nhw, dr, prcptot, nrd, lds, sdii, prcptot_thre, ns)
\item \strong{FAO Agronomic Season indices}: Indices based on water balance and agronomic season definition
\item \strong{Stress indices}: CDI (Condition Duration Index) and CEI (Condition Excess Index) for multi-variable stress analysis
}

For index-specific arguments, refer to the help files of individual index functions.
}
\section{Parallel Processing}{


Parallel processing is enabled using the \pkg{parallel} package.
Parallelization is undertaken by a FORK-type parallel socket cluster formed by \code{ncores}.
If \code{ncores} is not specified (default), \code{ncores} will be one less than the autodetected number of cores.
The maximum number of cores used for parallel processing can be set with the \code{max.ncores} argument,
although this will be reset to the auto-detected number of cores minus 1 if this number is exceeded. Note that not all
code, but just some critical loops within the function are parallelized.

In practice, parallelization does not always result in smaller execution times, due to the parallel overhead.
However, parallel computing may potentially provide a significant speedup for the
particular case of large multimember datasets or large grids.

Parallel computing is currently not available for Windows machines.
}

\examples{
\dontrun{
require(transformeR)
require(visualizeR)
# Load temperature and precipitation data
data("tasmax.grid")
data("tasmin.grid")
data("pr.grid")

## Example 1: Growing Season Length (GSL)
gsl.grid <- agroindexGrid(tm = tasmax.grid, 
                          index.code = "gsl",
                          time.resolution = "year",
                          index.arg.list = list(lat = 40))

## Example 2: Average temperature with custom season
avg.grid <- agroindexGrid(tm = tasmax.grid,
                          index.code = "avg",
                          time.resolution = "year",
                          index.arg.list = list(
                            year.start = "2000-06-01",
                            year.end = "2000-08-31"))

## Example 3: Number of heat waves
nhw.grid <- agroindexGrid(tx = tasmax.grid,
                          index.code = "nhw",
                          time.resolution = "year",
                          index.arg.list = list(
                            threshold = 35,
                            duration = 3))

## Example 4: CDI - Condition Duration Index (multi-variable stress)
# Requires bounds specification for each variable
cdi.grid <- agroindexGrid(tx = tasmax.grid,
                          hurs = hurs.grid,
                          index.code = "CDI",
                          time.resolution = "year",
                          index.arg.list = list(
                            bounds = data.frame(
                              var = c("tx", "hurs"),
                              lower = c(30, 0),
                              upper = c(Inf, 40)),
                            combiner = "all",
                            min_duration = 3))
}

}
\author{
J. Bedia is the original author of climdexGrid.R

Pablo Lavin is the author of the modifications in main function agroindexGrid
}
